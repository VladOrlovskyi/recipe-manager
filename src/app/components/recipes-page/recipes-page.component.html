<section>
  <app-recipes-navbar></app-recipes-navbar>
  @if (!outlet.isActivated) {
  <div class="recipes-header">
    <h2>Recipes</h2>
    <p class="subtitle">Browse and manage your recipe collection</p>
  </div>

  <mat-card class="filter-card">
    <mat-card-content class="filter-content">
      <mat-form-field appearance="fill" class="search-field">
        <mat-icon matPrefix>search</mat-icon>
        <input
          matInput
          type="text"
          placeholder="Search recipes by name or cuisine..."
          aria-label="Search recipes"
          [formControl]="searchControl"
        />
      </mat-form-field>

      <mat-form-field appearance="fill" class="select-field">
        <mat-label>All Tags</mat-label>
        <mat-select disableRipple [formControl]="tagControl">
          <mat-option [value]="'All'">All</mat-option>
          @for (recipeTag of recipesTags; track recipeTag) {
          <mat-option [value]="recipeTag">{{ recipeTag }}</mat-option>
          }
        </mat-select>
      </mat-form-field>
    </mat-card-content>
  </mat-card>
  <p class="status-text">
    Showing
    {{ pageSizeSignal() >= totalItems() ? totalItems() : pageSizeSignal() }} of
    {{ totalItems() }} recipes
  </p>

  <table
    mat-table
    [dataSource]="paginatedData()"
    class="recipes-table"
    aria-label="Recipe List"
  >
    <ng-container matColumnDef="Image">
      <th mat-header-cell *matHeaderCellDef>Image</th>
      <td mat-cell *matCellDef="let row">{{ row.image }}</td>
    </ng-container>
    <ng-container matColumnDef="Name">
      <th mat-header-cell *matHeaderCellDef>Recipe Name</th>
      <td mat-cell *matCellDef="let row">{{ row.name }}</td>
    </ng-container>
    <ng-container matColumnDef="Cuisine">
      <th mat-header-cell *matHeaderCellDef>Cuisine</th>
      <td mat-cell *matCellDef="let row">{{ row.cuisine }}</td>
    </ng-container>
    <ng-container matColumnDef="Difficulty">
      <th mat-header-cell *matHeaderCellDef>Difficulty</th>
      <td mat-cell *matCellDef="let row">{{ row.difficulty }}</td>
    </ng-container>
    <ng-container matColumnDef="Calories">
      <th mat-header-cell *matHeaderCellDef>Calories</th>
      <td mat-cell *matCellDef="let row">{{ row.caloriesPerServing }}</td>
    </ng-container>
    <ng-container matColumnDef="Tags">
      <th mat-header-cell *matHeaderCellDef>Tags</th>
      <td mat-cell *matCellDef="let row">{{ row.tags }}</td>
    </ng-container>
    <ng-container matColumnDef="Actions">
      <th mat-header-cell *matHeaderCellDef>Actions</th>
      <mat-cell *matCellDef="let row">
        <button mat-icon-button>
          <a [routerLink]="[row.id]">
            <mat-icon> </mat-icon>
          </a>
        </button>
        <button mat-icon-button>
          <mat-icon>launch2</mat-icon>
        </button>
        <button mat-icon-button>
          <mat-icon>launch3</mat-icon>
        </button>
      </mat-cell>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
  <mat-paginator
    [length]="totalItems()"
    [pageSize]="pageSizeSignal()"
    [pageIndex]="pageIndexSignal()"
    [pageSizeOptions]="pageSizeOptions"
    (page)="handlePageEvent($event)"
    aria-label="Select page of recipes"
  >
  </mat-paginator>
  }
</section>
<router-outlet #outlet="outlet"></router-outlet>
